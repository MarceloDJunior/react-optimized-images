{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, DetailedHTMLProps, ImgHTMLAttributes } from 'react'\n\ntype Props = DetailedHTMLProps<\n  ImgHTMLAttributes<HTMLImageElement>,\n  HTMLImageElement\n> & {\n  src: string\n}\n\nconst replaceExtension = (fileName: string, targetExtension: string) => {\n  return fileName.substr(0, fileName.lastIndexOf('.')) + `.${targetExtension}`\n}\n\nexport const Picture = ({ src, ...props }: Props) => {\n  const [imageSrc, setImageSrc] = useState(replaceExtension(src, 'webp'))\n  const [hasError, setHasError] = useState(false)\n\n  const onError = React.useCallback(() => {\n    if (!hasError) {\n      setHasError(true)\n      setImageSrc(src)\n    }\n  }, [])\n\n  return (\n    <picture>\n      <source srcSet={imageSrc} />\n      <img src={src} onError={onError} {...props} />\n    </picture>\n  )\n}\n\nexport default Picture\n"],"names":["useState","React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAM,gBAAgB,GAAG,UAAC,QAAgB,EAAE,eAAuB,EAAA;AACjE,IAAA,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,GAAI,CAAA,MAAA,CAAA,eAAe,CAAE,CAAA;AAC9E,CAAC,CAAA;AAEM,IAAM,OAAO,GAAG,UAAC,EAAwB,EAAA;AAAtB,IAAA,IAAA,GAAG,GAAA,EAAA,CAAA,GAAA,EAAK,KAAK,GAAA,MAAA,CAAA,EAAA,EAAf,OAAiB,CAAF,CAAA;AAC/B,IAAA,IAAA,KAA0BA,cAAQ,CAAC,gBAAgB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,EAAhE,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,WAAW,QAA2C,CAAA;IACjE,IAAA,EAAA,GAA0BA,cAAQ,CAAC,KAAK,CAAC,EAAxC,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,WAAW,GAAA,EAAA,CAAA,CAAA,CAAmB,CAAA;AAE/C,IAAA,IAAM,OAAO,GAAGC,yBAAK,CAAC,WAAW,CAAC,YAAA;QAChC,IAAI,CAAC,QAAQ,EAAE;YACb,WAAW,CAAC,IAAI,CAAC,CAAA;YACjB,WAAW,CAAC,GAAG,CAAC,CAAA;AACjB,SAAA;KACF,EAAE,EAAE,CAAC,CAAA;AAEN,IAAA,QACEA,yBAAA,CAAA,aAAA,CAAA,SAAA,EAAA,IAAA;QACEA,yBAAQ,CAAA,aAAA,CAAA,QAAA,EAAA,EAAA,MAAM,EAAE,QAAQ,EAAI,CAAA;AAC5B,QAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAK,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,EAAA,EAAM,KAAK,CAAA,CAAI,CACtC,EACX;AACH;;;;;"}